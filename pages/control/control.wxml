<view class="container">
    <view class="header">
        <text class="title">{{name}}</text>
        <view class="back-button icon-button" bind:tap="backToHome"><icon class="iconfont icon-back"/></view>
    </view>
    <view class="content">
        <view class="lamp">
          <icon style="color: {{realColor}}"  class="iconfont icon-lamp-{{isOpen ? 'on' : 'slash'}}"/>
        </view>
        <view wx:if="{{isOpen}}" class="imformation">
          <view class="imfo-child"><icon class="iconfont icon-mode"/>模式{{modeLabel[mode]}}</view>
          <view class="imfo-child"><icon class="iconfont icon-brightness"/>亮度 {{brightness}}%</view>
          <view class="imfo-child" style="{{isWiFiOpen ? '' : 'opacity: 0'}}"><icon class="iconfont icon-wifi"/>WiFi {{isWiFiConnected ? '已连接' : '未连接'}}</view>
        </view>
    </view>
    <view class="panel">
        <view wx:for="{{buttons}}" wx:key="index" class="panel-button {{item.type == 'drag' ? 'long-button' : ''}}">
          <view wx:if="{{item.type == 'tap'}}" 
          class="tap-wrapper {{item.isPressed ? 'pressed' : ''}} {{isOpen || item.name == 'power' ? '' : 'inactive'}}" 
          bindtouchstart="{{isOpen || item.name == 'power' ? 'onTouchStart' : ''}}"
          bindtouchend="{{isOpen || item.name == 'power' ? 'onTouchEnd' : ''}}"
          bindtap="{{isOpen || item.name == 'power' ? 'onTap' : ''}}"
          data-index="{{index}}">
            <icon wx:if="{{item.name == 'power'}}" class="iconfont icon-power"/>
            {{item.label}}
          </view>

          <view wx:if="{{item.type == 'drag'}}" 
          class="drag-wrapper {{item.name == 'brightness' ? 'bright-wrapper' : ''}} {{item.name == 'color' ? 'color-wrapper' : ''}}" 
          bindtouchmove="dragTouch" bindtouchstart="dragStart" 
          bindtouchend="dragEnd" data-index="{{index}}">
              <view wx:if="{{item.name == 'brightness'}}" class="bright-child" style="width: {{brightness + '%'}}"></view>
          </view>
        </view>
    </view>
</view>